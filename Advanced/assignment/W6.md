# **ğŸ“Œ Week 6: ì¢…í•© ì‹¤ì „ ë¬¸ì œ í’€ì´**

---

```jsx
**[ì¿¼ë¦¬ ì‘ì„± í…œí”Œë¦¿]**
- ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ëŠ” ëª©í‘œ, í™•ì¸í•  ì§€í‘œ:
- ì¿¼ë¦¬ ê³„ì‚° ë°©ë²•:
- ë°ì´í„°ì˜ ê¸°ê°„:
- ì‚¬ìš©í•  í…Œì´ë¸”:
- Join KEY:
- ë°ì´í„° íŠ¹ì§•:
```

## ğŸ“ **ë¬¸ì œ í’€ì´**: 

ğŸ”— [solvesql - ë³µìˆ˜ êµ­ì  ë©”ë‹¬ ìˆ˜ìƒí•œ ì„ ìˆ˜ ì°¾ê¸°](https://solvesql.com/problems/multiple-medalist/)

ğŸ“ë¬¸ì œ ë‚´ìš©

2000ë…„ ì´í›„ì˜ ë©”ë‹¬ ìˆ˜ìƒ ê¸°ë¡ë§Œ ê³ ë ¤í–ˆì„ ë•Œ, ë©”ë‹¬ì„ ìˆ˜ìƒí•œ ì˜¬ë¦¼í”½ ì°¸ê°€ ì„ ìˆ˜ ì¤‘ 2ê°œ ì´ìƒì˜ êµ­ì ìœ¼ë¡œ ë©”ë‹¬ì„ ìˆ˜ìƒí•œ ê¸°ë¡ì´ ìˆëŠ” ì„ ìˆ˜ì˜ ì´ë¦„ì„ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”. ì¡°íšŒëœ ì„ ìˆ˜ì˜ ì´ë¦„ì€ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì •ë ¬ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.



ğŸ“ë¬¸ì œ í’€ì´

- ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ëŠ” ëª©í‘œ, í™•ì¸í•  ì§€í‘œ: `name`
- ì¿¼ë¦¬ ê³„ì‚° ë°©ë²•: `COUNT`
- ë°ì´í„°ì˜ ê¸°ê°„: `2000ë…„ ì´í›„`
- ì‚¬ìš©í•  í…Œì´ë¸”: `athletes`, `games`, `records`
- Join KEY: 
    1. `athletes.id = records.athlete_id`
    2. `games.id = records.game_id`
- ë°ì´í„° íŠ¹ì§•: `2ê°œ ì´ìƒì˜ êµ­ì ìœ¼ë¡œ ë©”ë‹¬ ìˆ˜ìƒ`, `ì´ë¦„ ì˜¤ë¦„ì°¨ìˆœ`

```SQL
SELECT 
  a.name 
FROM records AS r
JOIN games AS g 
ON r.game_id = g.id
JOIN athletes AS a 
ON r.athlete_id = a.id
WHERE 
  g.year >= 2000
  AND medal IS NOT NULL
GROUP BY 
  athlete_id
HAVING 
  COUNT(DISTINCT team_id) >= 2
ORDER BY 
  a.name ASC
```

---

ğŸ”— [solvesql - ì˜¨ë¼ì¸ ì‡¼í•‘ëª°ì˜ ì›” ë³„ ë§¤ì¶œì•¡ ì§‘ê³„](https://solvesql.com/problems/shoppingmall-monthly-summary/)

ğŸ“ë¬¸ì œ ë‚´ìš©

ì´ ì˜¨ë¼ì¸ ì‡¼í•‘ëª°ì˜ ì›” ë³„ ë§¤ì¶œ ê·œëª¨ë¥¼ í•œ ëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤. ìœ„ ë‘ í…Œì´ë¸”ì˜ ë°ì´í„°ë¥¼ ì¡°í•©í•´ ì›” ë³„ë¡œ ì·¨ì†Œ ì£¼ë¬¸ì„ ì œì™¸í•œ ì£¼ë¬¸ ê¸ˆì•¡ì˜ í•©ê³„, ì·¨ì†Œ ì£¼ë¬¸ì˜ ê¸ˆì•¡ í•©ê³„, ê·¸ë¦¬ê³  ì´ í•©ê³„ë¥¼ ê³„ì‚°í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

ğŸ“ë¬¸ì œ í’€ì´

- ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ëŠ” ëª©í‘œ, í™•ì¸í•  ì§€í‘œ: `order_month`, `ordered_amount`, `canceled_amount`, `	total_amount`
- ì¿¼ë¦¬ ê³„ì‚° ë°©ë²•: `SUM`
- ë°ì´í„°ì˜ ê¸°ê°„:
- ì‚¬ìš©í•  í…Œì´ë¸”: `orders`, `order_items`
- Join KEY: 
    1. `order_id`
- ë°ì´í„° íŠ¹ì§•: 

```SQL
SELECT
  STRFTIME('%Y-%m', order_date) AS order_month,
  SUM(CASE 
    WHEN i.order_id NOT REGEXP '^C' THEN price * quantity 
    ELSE 0 
  END) AS ordered_amount,
  SUM(CASE 
    WHEN i.order_id REGEXP '^C' THEN price * quantity 
    ELSE 0 
  END) canceled_amount,
  SUM(price * quantity) AS total_amount
FROM order_items AS i
LEFT JOIN orders AS o 
ON i.order_id = o.order_id
GROUP BY
  order_month
ORDER BY
  order_month
```

---

ğŸ”— [solvesql - ì„¸ ëª…ì´ ì„œë¡œ ì¹œêµ¬ì¸ ê´€ê³„ ì°¾ê¸°](https://solvesql.com/problems/friend-group-of-3/)

ğŸ“ë¬¸ì œ ë‚´ìš©

ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ í™œìš©í•´ IDê°€ 3820ì¸ ì‚¬ìš©ìë¥¼ í¬í•¨í•´ ì„¸ ëª…ì˜ ì‚¬ìš©ìê°€ ì¹œêµ¬ ê´€ê³„ì¸ ê²½ìš°ë¥¼ ëª¨ë‘ ì¶œë ¥í•˜ëŠ” ì¿¼ë¦¬ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.

ğŸ“ë¬¸ì œ í’€ì´

```SQL
SELECT
  A.user_a_id AS "user_a_id", 
  B.user_a_id AS "user_b_id",
  B.user_b_id AS "user_c_id"
FROM
  edges AS A
  JOIN edges B
  ON A.user_b_id = B.user_a_id
  JOIN edges C 
  ON A.user_a_id = C.user_a_id AND B.user_b_id = C.user_b_id
WHERE
  A.user_a_id = 3820
  OR B.user_a_id = 3820
  OR B.user_b_id = 3820
```

https://velog.io/@deaf52/solvesql-day-24-%EC%84%B8-%EB%AA%85%EC%9D%B4-%EC%84%9C%EB%A1%9C-%EC%B9%9C%EA%B5%AC%EC%9D%B8-%EA%B4%80%EA%B3%84-%EC%B0%BE%EA%B8%B0.sql